(this["webpackJsonpconditional-fields"]=this["webpackJsonpconditional-fields"]||[]).push([[0],{242:function(e,t,n){},259:function(e,t){},433:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n(17),r=n(56),c=(n(124),n(240),n(241),n(242),n(91)),a=n.n(c),s=n(154),l=n(209),u=n(210),d=n(235),f=n(234),j=n(1),p=n(3),O=n(9),v=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).onConfigure=Object(s.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.props.sdk.app.getCurrentState();case 2:return t=e.sent,e.abrupt("return",{parameters:o.state.parameters,targetState:t});case 4:case"end":return e.stop()}}),e)}))),o.state={parameters:{}},e.sdk.app.onConfigure((function(){return o.onConfigure()})),o}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(s.a)(a.a.mark((function e(){var t,n=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.sdk.app.getParameters();case 2:t=e.sent,this.setState(t?{parameters:t}:this.state,(function(){n.props.sdk.app.setReady()}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(O.jsx)(j.W,{className:Object(p.a)({margin:"80px"}),children:Object(O.jsxs)(j.r,{children:[Object(O.jsx)(j.t,{children:"Conditional fields application"}),Object(O.jsx)(j.N,{children:"App Config"}),Object(O.jsx)(j.E,{children:"Welcome to your contentful app. This is your config page."})]})})}}]),n}(o.Component),b=n(102),h=n(77),m=n(43),g=n(161),x=(n(432),function(e,t){return e.map((function(e){var n,o,i,r=t.entry.fields[e].getForLocale(t.locales.default),c=null===(n=t.editor.editorInterface)||void 0===n||null===(o=n.controls)||void 0===o?void 0:o.find((function(e){return e.fieldId===r.id})),a=t.contentType.fields.find((function(t){return t.id===e})).name,s=null!==(i=null===c||void 0===c?void 0:c.widgetId)&&void 0!==i?i:"",l=Object(m.a)(Object(m.a)({},t),{},{field:r,locales:t.locales,parameters:Object(m.a)(Object(m.a)({},t.parameters),{},{instance:Object(m.a)(Object(m.a)({},t.parameters.instance),null===c||void 0===c?void 0:c.settings)})});return Object(O.jsx)(g.b,{name:a,sdk:l,children:Object(O.jsx)(g.a,{sdk:l,widgetId:s})})}))}),E=function(e){var t,n,i=e.sdk,r=null===(t=function(e){var t,n;return null===(t=e.editor.editorInterface)||void 0===t||null===(n=t.controls)||void 0===n?void 0:n.find((function(e){var t;return null===(t=e.settings)||void 0===t?void 0:t.controlField}))}(i))||void 0===t?void 0:t.fieldId,c=i.entry.fields[r],a=function(e){var t,n,o=null===(t=e.editor.editorInterface)||void 0===t||null===(n=t.controls)||void 0===n?void 0:n.filter((function(e){var t;return null===(t=e.settings)||void 0===t?void 0:t.informationField}));return o?o.map((function(e){return e.fieldId})):null}(i),s=null===c||void 0===c?void 0:c.getValue(),l=Object(o.useState)(s),u=Object(h.a)(l,2),d=u[0],f=u[1];Object(o.useEffect)((function(){null===c||void 0===c||c.onValueChanged((function(e){return f(e)}))}),[c]);var p=null===(n=i.entry.fields[r])||void 0===n?void 0:n.validations[0].in,v=i.editor.editorInterface.controls,g=null===p||void 0===p?void 0:p.reduce((function(e,t){var n=v.filter((function(e){var n,o=null===(n=e.settings)||void 0===n?void 0:n.sectionTypes,i=null===o||void 0===o?void 0:o.split(", ");return null===i||void 0===i?void 0:i.includes(t)})).map((function(e){return e.fieldId}));return Object(m.a)(Object(m.a)({},e),{},Object(b.a)({},t,n))}),{});return Object(O.jsxs)("div",{style:{maxWidth:"95%",margin:"10px auto"},children:[a&&x(a,i),r?x([r],i):Object(O.jsx)(j.E,{children:"Expect one control field"}),d&&Object(O.jsxs)(j.q,{flexDirection:"column",marginTop:"spacingL",marginBottom:"spacingXl",children:[Object(O.jsx)(j.E,{children:"Fields for ".concat(r," ").concat(d,":")}),x(g[d],i)]})]})},I=function(e){return Object(O.jsx)(j.E,{children:"Hello Page Component"})},k=function(e){var t=e.sdk.entry.fields.type,n=Object(o.useState)(t.getValue()),i=Object(h.a)(n,2),r=i[0],c=i[1];Object(o.useEffect)((function(){var e=t.onValueChanged((function(e){c(e)}));return function(){return e()}}),[t]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(j.t,{children:r||"Choose section type"}),r&&Object(O.jsx)(j.E,{children:function(e){switch(e){case"one":return"This section used with one fields:";case"two":return"This section used with two fields:";default:return null}}(r)})]})},C=(n(87),n(18),function(e){var t=e.sdk,n=t.entry.fields.type,i=Object(o.useState)(n.getValue()),r=Object(h.a)(i,2),c=(r[0],r[1]);t.window.startAutoResizer(),Object(o.useEffect)((function(){var e=n.onValueChanged((function(e){c(e)}));return function(){return e()}}),[n]);return Object(O.jsx)(j.E,{children:"Hello Entry Field Component"})}),y=function(e){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(j.E,{children:"Hello Dialog Component"}),Object(O.jsx)(j.E,{children:JSON.stringify(e)})]})};Object(r.init)((function(e){var t=document.getElementById("root");[{location:r.locations.LOCATION_APP_CONFIG,component:Object(O.jsx)(v,{sdk:e})},{location:r.locations.LOCATION_ENTRY_FIELD,component:Object(O.jsx)(C,{sdk:e})},{location:r.locations.LOCATION_ENTRY_EDITOR,component:Object(O.jsx)(E,{sdk:e})},{location:r.locations.LOCATION_DIALOG,component:Object(O.jsx)(y,{sdk:e})},{location:r.locations.LOCATION_ENTRY_SIDEBAR,component:Object(O.jsx)(k,{sdk:e})},{location:r.locations.LOCATION_PAGE,component:Object(O.jsx)(I,{sdk:e})}].forEach((function(n){e.location.is(n.location)&&Object(i.render)(n.component,t)}))}))}},[[433,1,2]]]);
//# sourceMappingURL=main.6f96ac88.chunk.js.map